# WinterCMS DevOps TEST TASK Project
-Прохоров А. В.
 Это моя документацияп по развертыванию WinterCMS с использованием программы контейниризации Docker и настройке CI/CD. Здесь собраны все нужные файлы и инструкции, чтобы можно было запустить данный проект у себя на хосте :3

## Cтек проекта

- **Docker-контейнер** с WinterCMS и MySQL
- **Автоматические тесты** С использованем GitLab CI/CD (к сожалению пайплайн не работает, реализована заглушка для условий ТЗ)

## Что нужно установить? 
Перед началом работы убедись, что у тебя стоит:

1. Docker и Docker Compose
2. Git

## Как запустить проект?

В терминале выполнить данные команды:

```bash
git clone https://github.com/RHAPAP/WINTERCMS_TestTask_DevOps.git
cd WINTERCMS_TestTask_DevOps/

# Запуск контейнеров проекта
docker-compose up -d --build
```

Поcле запуска надо будет чуть чуть подождать, пока контейнеры не запустятся, затем сайт проекта будет доступен по адресу:  
[http://localhost:8080](http://localhost:8080)

## Траблшутинг

### 1. Ошибка с APP_KEY
Если выскакивает сообщение про отсутстие ключа приложения:
```bash
docker-compose exec app bash

# Генерируем новый ключ
php artisan key:generate

exit
```

### 2. Не работает БД
```bash
docker-compose restart db
```

## Описание CI/CD пайплайна

Я сделал автоматическую проверку кода через GitLab. Каждый раз, когда я что-то меняю и отправляю в репозиторий, происходят следующие три этапа:

1. **Сборка** — Docker проверяет, что образ собирается без ошибок
2. **Тесты** — Запускается контейнер и проверяется работа CMS
3. **Деплой** (пока заглушка) — Здесь можно настроить выкладку на сервер